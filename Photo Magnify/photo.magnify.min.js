(function(e,t,n,r){"use strict";function f(){l(n,t);c();e.each(u,function(){function y(e,t){var n=e.clientX,r=e.clientY;return n+i.scrollLeft()>=t.left&&n+i.scrollLeft()<=t.right&&r+i.scrollTop()>=t.top&&r+i.scrollTop()<=t.bottom}function b(){function e(e){var t=(e.clientX-u.left-v+i.scrollLeft())/d,n=(e.clientY-u.top-m+i.scrollTop())/d;if(t<0)t=0;if(n<0)n=0;var r=h-f-t;if(r<0)t=h-f;var o=c-l-n;if(o<0)n=c-l;s.css({"background-position-x":-t,"background-position-y":-n})}function p(e){var t=e.clientX-o.outerWidth()/2+a.left,n=e.clientY-o.outerHeight()/2+a.top;t-=u.left-i.scrollLeft();n-=u.top-i.scrollTop();if(e.clientX+i.scrollLeft()-r.offset().left-o.width()/2<0)t=0+a.left;if(e.clientY+i.scrollTop()-r.offset().top-o.height()/2<0)n=0+a.top;if(t+o.outerWidth()-a.left+u.left>u.right)t=u.right+a.left-o.width()-u.left-1;if(n+o.outerHeight()-a.top+u.top>u.bottom)n=u.bottom+a.top-o.outerHeight()-u.top+1;o.css({left:t,top:n})}function b(e){var e={clientX:t.mouseXPos,clientY:t.mouseYPos};if(y(e,u)){w()}else{E()}}function w(){s.show();o.show()}function E(){s.hide();o.hide()}n.mousemove(function(t){clearTimeout(g);g=setTimeout(function(e){b(e)},1e3);if(y(t,u)){w();e(t);p(t)}else{E()}})}function w(){var t=e("<img />");t.hide();t.bind("load",function(){c=e(this).height();h=e(this).width();p=f/h;d=r.outerWidth()/h;o.css({width:f*d,height:l*d});v=o.width()/2;m=o.height()/2;e(this).remove()});e("body").append(t);t.attr("src",r.attr("src"))}function E(){s.css({"background-image":r.data("img-src"),left:u.right+16,top:u.top})}function S(t){n=e(t),r=n.find("img.magnify-src"),s=n.parent(".magnify-wrap").find(".magnify-enlarge"),o=n.find(".magnify-target"),u={left:r.offset().left,right:r.offset().left+r.outerWidth(),top:r.offset().top,bottom:r.offset().top+r.outerHeight()},a={top:parseInt(n.css("padding-top")),left:parseInt(n.css("padding-left"))},f=s.width(),l=s.height()}var n,r,s,o,u,a,f,l,c,h,p,d,v,m,g;S(this);E();w();b()})}function l(t,n){e(t).mousemove(function(e){n.mouseXPos=e.pageX;n.mouseYPos=e.pageY})}function c(){a={top:parseInt(o.css("margin-top")),right:parseInt(o.css("margin-right")),bottom:parseInt(o.css("margin-bottom")),left:parseInt(o.css("margin-left"))}}var i=e(t),s=e(n),o=e("body"),u=e(".magnify-container"),a;f()})(jQuery,window,document)